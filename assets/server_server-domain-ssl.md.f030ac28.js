import{_ as s,o as n,c as a,X as l}from"./chunks/framework.af6290ec.js";const d=JSON.parse('{"title":"åŸŸåç”³è¯·ä¸ SSL è¯ä¹¦é…ç½®","description":"","frontmatter":{},"headers":[],"relativePath":"server/server-domain-ssl.md","filePath":"server/server-domain-ssl.md"}'),o={name:"server/server-domain-ssl.md"},p=l(`<h1 id="åŸŸåç”³è¯·ä¸-ssl-è¯ä¹¦é…ç½®" tabindex="-1">åŸŸåç”³è¯·ä¸ SSL è¯ä¹¦é…ç½® <a class="header-anchor" href="#åŸŸåç”³è¯·ä¸-ssl-è¯ä¹¦é…ç½®" aria-label="Permalink to &quot;åŸŸåç”³è¯·ä¸ SSL è¯ä¹¦é…ç½®&quot;">â€‹</a></h1><p>æœ¬æ–‡å°†ä»‹ç»å¦‚ä½•è´­ä¹°åŸŸåã€è¿›è¡Œ DNS è§£æã€åŸŸåå¤‡æ¡ˆä»¥åŠ SSL è¯ä¹¦çš„ç”³è¯·ä¸é…ç½®ã€‚</p><h2 id="åŸŸåç”³è¯·" tabindex="-1">åŸŸåç”³è¯· <a class="header-anchor" href="#åŸŸåç”³è¯·" aria-label="Permalink to &quot;åŸŸåç”³è¯·&quot;">â€‹</a></h2><h3 id="_1-è´­ä¹°åŸŸå" tabindex="-1">1. è´­ä¹°åŸŸå <a class="header-anchor" href="#_1-è´­ä¹°åŸŸå" aria-label="Permalink to &quot;1. è´­ä¹°åŸŸå&quot;">â€‹</a></h3><p>åŸŸåå¯ä»¥é€šè¿‡ä»¥ä¸‹å¹³å°è´­ä¹°ï¼š</p><ul><li><a href="https://wanwang.aliyun.com/" target="_blank" rel="noreferrer">é˜¿é‡Œäº‘ï¼ˆä¸‡ç½‘ï¼‰</a></li><li><a href="https://dnspod.cloud.tencent.com/" target="_blank" rel="noreferrer">è…¾è®¯äº‘</a></li><li><a href="https://www.huaweicloud.com/product/domain.html" target="_blank" rel="noreferrer">åä¸ºäº‘</a></li><li><a href="https://www.godaddy.com/" target="_blank" rel="noreferrer">GoDaddy</a></li><li><a href="https://www.namecheap.com/" target="_blank" rel="noreferrer">Namecheap</a></li></ul><p><strong>è´­ä¹°æ­¥éª¤ï¼š</strong></p><ol><li>ç™»å½•åŸŸåæœåŠ¡å•†å¹³å°</li><li>åœ¨åŸŸåæ³¨å†Œé¡µé¢æœç´¢ä½ æƒ³è¦çš„åŸŸå</li><li>æŸ¥çœ‹åŸŸåæ˜¯å¦å¯ç”¨åŠä»·æ ¼</li><li>é€‰æ‹©æ³¨å†Œå¹´é™ï¼ˆé€šå¸¸ 1-10 å¹´ï¼‰</li><li>å¡«å†™åŸŸåæŒæœ‰è€…ä¿¡æ¯</li><li>å®Œæˆæ”¯ä»˜</li></ol><blockquote><p><strong>æç¤ºï¼š</strong> å»ºè®®é€‰æ‹© <code>.com</code>ã€<code>.cn</code>ã€<code>.net</code> ç­‰ä¸»æµåç¼€ï¼Œä¾¿äºç”¨æˆ·è®°å¿†å’Œ SEO ä¼˜åŒ–ã€‚</p></blockquote><h3 id="_2-åŸŸåè§£æ-dns-è§£æ" tabindex="-1">2. åŸŸåè§£æï¼ˆDNS è§£æï¼‰ <a class="header-anchor" href="#_2-åŸŸåè§£æ-dns-è§£æ" aria-label="Permalink to &quot;2. åŸŸåè§£æï¼ˆDNS è§£æï¼‰&quot;">â€‹</a></h3><p>è´­ä¹°åŸŸååï¼Œéœ€è¦å°†åŸŸåç»‘å®šåˆ°å¯¹åº”çš„ä¸»æœºï¼Œè¿™å°±æ˜¯ DNS è§£æã€‚</p><p><strong>å¸¸è§è®°å½•ç±»å‹ï¼š</strong></p><table><thead><tr><th>è®°å½•ç±»å‹</th><th>è¯´æ˜</th><th>ç¤ºä¾‹</th></tr></thead><tbody><tr><td>A è®°å½•</td><td>å°†åŸŸåæŒ‡å‘ä¸€ä¸ª IPv4 åœ°å€</td><td><code>192.168.1.1</code></td></tr><tr><td>AAAA è®°å½•</td><td>å°†åŸŸåæŒ‡å‘ä¸€ä¸ª IPv6 åœ°å€</td><td><code>2001:db8::1</code></td></tr><tr><td>CNAME è®°å½•</td><td>å°†åŸŸåæŒ‡å‘å¦ä¸€ä¸ªåŸŸå</td><td><code>www.example.com</code></td></tr><tr><td>MX è®°å½•</td><td>é‚®ä»¶äº¤æ¢è®°å½•</td><td><code>mail.example.com</code></td></tr><tr><td>TXT è®°å½•</td><td>æ–‡æœ¬è®°å½•ï¼Œå¸¸ç”¨äºéªŒè¯</td><td><code>v=spf1 include:...</code></td></tr></tbody></table><p><strong>é…ç½®æ­¥éª¤ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰ï¼š</strong></p><ol><li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°</li><li>è¿›å…¥ã€åŸŸåæœåŠ¡ã€‘â†’ã€åŸŸååˆ—è¡¨ã€‘</li><li>é€‰æ‹©éœ€è¦è§£æçš„åŸŸåï¼Œç‚¹å‡»ã€è§£æã€‘</li><li>ç‚¹å‡»ã€æ·»åŠ è®°å½•ã€‘</li><li>å¡«å†™è§£æé…ç½®ï¼š <ul><li><strong>è®°å½•ç±»å‹</strong>ï¼šé€‰æ‹© <code>A</code> è®°å½•</li><li><strong>ä¸»æœºè®°å½•</strong>ï¼šå¡«å†™ <code>@</code>ï¼ˆä»£è¡¨ä¸»åŸŸåï¼‰æˆ– <code>www</code>ï¼ˆä»£è¡¨ www å­åŸŸåï¼‰</li><li><strong>è®°å½•å€¼</strong>ï¼šå¡«å†™æœåŠ¡å™¨çš„å…¬ç½‘ IP åœ°å€</li><li><strong>TTL</strong>ï¼šé»˜è®¤ 10 åˆ†é’Ÿå³å¯</li></ul></li><li>ç‚¹å‡»ã€ç¡®è®¤ã€‘ä¿å­˜</li></ol><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># éªŒè¯è§£ææ˜¯å¦ç”Ÿæ•ˆ</span></span>
<span class="line"><span style="color:#FFCB6B;">ping</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æˆ–ä½¿ç”¨ nslookup æŸ¥è¯¢</span></span>
<span class="line"><span style="color:#FFCB6B;">nslookup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com</span></span></code></pre></div><blockquote><p><strong>æ³¨æ„ï¼š</strong> DNS è§£æç”Ÿæ•ˆéœ€è¦ä¸€å®šæ—¶é—´ï¼ˆé€šå¸¸å‡ åˆ†é’Ÿåˆ° 48 å°æ—¶ä¸ç­‰ï¼‰ï¼Œå–å†³äº TTL è®¾ç½®å’Œå…¨çƒ DNS ç¼“å­˜åˆ·æ–°ã€‚</p></blockquote><h3 id="_3-åŸŸåå¤‡æ¡ˆ" tabindex="-1">3. åŸŸåå¤‡æ¡ˆ <a class="header-anchor" href="#_3-åŸŸåå¤‡æ¡ˆ" aria-label="Permalink to &quot;3. åŸŸåå¤‡æ¡ˆ&quot;">â€‹</a></h3><p>åœ¨ä¸­å›½å¤§é™†ä½¿ç”¨çš„åŸŸåéœ€è¦è¿›è¡Œ ICP å¤‡æ¡ˆã€‚</p><p><strong>å¤‡æ¡ˆæ¡ä»¶ï¼š</strong></p><ul><li>åŸŸåå·²å®Œæˆå®åè®¤è¯</li><li>æ‹¥æœ‰ä¸­å›½å¤§é™†çš„äº‘æœåŠ¡å™¨æˆ–ä¸»æœº</li></ul><p><strong>å¤‡æ¡ˆæ­¥éª¤ï¼ˆä»¥é˜¿é‡Œäº‘ä¸ºä¾‹ï¼‰ï¼š</strong></p><ol><li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œè¿›å…¥ã€ICP å¤‡æ¡ˆã€‘</li><li>å¡«å†™ä¸»ä½“ä¿¡æ¯ï¼ˆä¸ªäººæˆ–ä¼ä¸šï¼‰</li><li>å¡«å†™ç½‘ç«™ä¿¡æ¯</li><li>ä¸Šä¼ ç›¸å…³è¯ä»¶ææ–™</li><li>ç­‰å¾…åˆå®¡ï¼ˆé€šå¸¸ 1-2 ä¸ªå·¥ä½œæ—¥ï¼‰</li><li>å®Œæˆç®¡å±€å®¡æ ¸ï¼ˆå„çœæ—¶é—´ä¸åŒï¼Œé€šå¸¸ 7-20 ä¸ªå·¥ä½œæ—¥ï¼‰</li></ol><p><strong>å¤‡æ¡ˆæˆåŠŸåï¼š</strong></p><ul><li>ä¼šè·å¾— ICP å¤‡æ¡ˆå·ï¼Œå¦‚ï¼š<code>äº¬ICPå¤‡XXXXXXXXå·</code></li><li>éœ€è¦åœ¨ç½‘ç«™åº•éƒ¨å±•ç¤ºå¤‡æ¡ˆå·ï¼Œå¹¶é“¾æ¥åˆ°å·¥ä¿¡éƒ¨å¤‡æ¡ˆæŸ¥è¯¢é¡µé¢</li></ul><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">href</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">https://beian.miit.gov.cn/</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">target</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">_blank</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">äº¬ICPå¤‡XXXXXXXXå·</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">&gt;</span></span></code></pre></div><hr><h2 id="ssl-è¯ä¹¦é…ç½®" tabindex="-1">SSL è¯ä¹¦é…ç½® <a class="header-anchor" href="#ssl-è¯ä¹¦é…ç½®" aria-label="Permalink to &quot;SSL è¯ä¹¦é…ç½®&quot;">â€‹</a></h2><p>SSL è¯ä¹¦ç”¨äºå®ç° HTTPS åŠ å¯†ä¼ è¾“ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®å®‰å…¨ã€‚</p><h3 id="_1-ç”³è¯·-ssl-è¯ä¹¦" tabindex="-1">1. ç”³è¯· SSL è¯ä¹¦ <a class="header-anchor" href="#_1-ç”³è¯·-ssl-è¯ä¹¦" aria-label="Permalink to &quot;1. ç”³è¯· SSL è¯ä¹¦&quot;">â€‹</a></h3><p><strong>å…è´¹è¯ä¹¦ç”³è¯·æ¸ é“ï¼š</strong></p><ul><li><a href="https://www.aliyun.com/product/cas" target="_blank" rel="noreferrer">é˜¿é‡Œäº‘å…è´¹è¯ä¹¦</a>ï¼ˆå…è´¹ DV è¯ä¹¦ï¼Œæœ‰æ•ˆæœŸ 1 å¹´ï¼‰</li><li><a href="https://cloud.tencent.com/product/ssl" target="_blank" rel="noreferrer">è…¾è®¯äº‘å…è´¹è¯ä¹¦</a></li><li><a href="https://letsencrypt.org/" target="_blank" rel="noreferrer">Let&#39;s Encrypt</a>ï¼ˆè‡ªåŠ¨åŒ–å…è´¹è¯ä¹¦ï¼‰</li><li><a href="https://freessl.cn/" target="_blank" rel="noreferrer">FreeSSL</a></li></ul><p><strong>é˜¿é‡Œäº‘ç”³è¯·æ­¥éª¤ï¼š</strong></p><ol><li>ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°ï¼Œè¿›å…¥ã€SSL è¯ä¹¦ã€‘</li><li>ç‚¹å‡»ã€å…è´¹è¯ä¹¦ã€‘â†’ã€åˆ›å»ºè¯ä¹¦ã€‘</li><li>å¡«å†™è¯ä¹¦ä¿¡æ¯ï¼š <ul><li><strong>è¯ä¹¦ç»‘å®šåŸŸå</strong>ï¼šå¡«å†™ä½ çš„åŸŸåï¼ˆå¦‚ <code>example.com</code> æˆ– <code>*.example.com</code>ï¼‰</li></ul></li><li>é€‰æ‹©éªŒè¯æ–¹å¼ï¼š <ul><li><strong>DNS éªŒè¯</strong>ï¼šåœ¨åŸŸåè§£æä¸­æ·»åŠ æŒ‡å®šçš„ TXT è®°å½•</li><li><strong>æ–‡ä»¶éªŒè¯</strong>ï¼šåœ¨ç½‘ç«™æ ¹ç›®å½•æ”¾ç½®éªŒè¯æ–‡ä»¶</li></ul></li><li>å®ŒæˆéªŒè¯åï¼Œç­‰å¾…è¯ä¹¦ç­¾å‘</li><li>ä¸‹è½½è¯ä¹¦æ–‡ä»¶</li></ol><h3 id="_2-ä¸‹è½½-ssl-è¯ä¹¦" tabindex="-1">2. ä¸‹è½½ SSL è¯ä¹¦ <a class="header-anchor" href="#_2-ä¸‹è½½-ssl-è¯ä¹¦" aria-label="Permalink to &quot;2. ä¸‹è½½ SSL è¯ä¹¦&quot;">â€‹</a></h3><p>è¯ä¹¦ç”³è¯·æˆåŠŸåï¼Œä¸‹è½½å¯¹åº”æœåŠ¡å™¨ç±»å‹çš„è¯ä¹¦ï¼š</p><ul><li><strong>Nginx</strong>ï¼š<code>.pem</code> å’Œ <code>.key</code> æ–‡ä»¶</li><li><strong>Apache</strong>ï¼š<code>.crt</code>ã€<code>.key</code> å’Œ CA è¯ä¹¦æ–‡ä»¶</li><li><strong>Tomcat</strong>ï¼š<code>.pfx</code> æ–‡ä»¶</li></ul><p><strong>ä¸‹è½½çš„ Nginx è¯ä¹¦åŒ…å«ï¼š</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">â”œâ”€â”€ yourdomain.com.pem    # è¯ä¹¦æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">â””â”€â”€ yourdomain.com.key    # ç§é’¥æ–‡ä»¶</span></span></code></pre></div><h3 id="_3-ä½¿ç”¨-docker-éƒ¨ç½²-nginx-ssl" tabindex="-1">3. ä½¿ç”¨ Docker éƒ¨ç½² Nginx + SSL <a class="header-anchor" href="#_3-ä½¿ç”¨-docker-éƒ¨ç½²-nginx-ssl" aria-label="Permalink to &quot;3. ä½¿ç”¨ Docker éƒ¨ç½² Nginx + SSL&quot;">â€‹</a></h3><p>ä½¿ç”¨ Docker æ–¹å¼éƒ¨ç½² Nginx å¹¶é…ç½® SSL è¯ä¹¦ï¼Œæ›´ä¾¿äºç®¡ç†å’Œè¿ç§»ã€‚</p><h4 id="_3-1-é¡¹ç›®ç›®å½•ç»“æ„" tabindex="-1">3.1 é¡¹ç›®ç›®å½•ç»“æ„ <a class="header-anchor" href="#_3-1-é¡¹ç›®ç›®å½•ç»“æ„" aria-label="Permalink to &quot;3.1 é¡¹ç›®ç›®å½•ç»“æ„&quot;">â€‹</a></h4><p>åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»ºé¡¹ç›®ç›®å½•ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»ºé¡¹ç›®ç›®å½•</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/nginx-docker</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/nginx-docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»ºå­ç›®å½•</span></span>
<span class="line"><span style="color:#FFCB6B;">mkdir</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">html</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">conf.d</span></span></code></pre></div><p><strong>å®Œæ•´ç›®å½•ç»“æ„ï¼š</strong></p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#A6ACCD;">nginx-docker/</span></span>
<span class="line"><span style="color:#A6ACCD;">â”œâ”€â”€ docker-compose.yml      # Docker Compose é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">â”œâ”€â”€ nginx.conf              # Nginx ä¸»é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">â”œâ”€â”€ conf.d/</span></span>
<span class="line"><span style="color:#A6ACCD;">â”‚   â””â”€â”€ default.conf        # ç«™ç‚¹é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">â”œâ”€â”€ ssl/</span></span>
<span class="line"><span style="color:#A6ACCD;">â”‚   â”œâ”€â”€ yourdomain.com.pem  # SSL è¯ä¹¦</span></span>
<span class="line"><span style="color:#A6ACCD;">â”‚   â””â”€â”€ yourdomain.com.key  # SSL ç§é’¥</span></span>
<span class="line"><span style="color:#A6ACCD;">â””â”€â”€ html/</span></span>
<span class="line"><span style="color:#A6ACCD;">    â””â”€â”€ index.html          # ç½‘ç«™æ–‡ä»¶</span></span></code></pre></div><h4 id="_3-2-ä¸Šä¼ -ssl-è¯ä¹¦" tabindex="-1">3.2 ä¸Šä¼  SSL è¯ä¹¦ <a class="header-anchor" href="#_3-2-ä¸Šä¼ -ssl-è¯ä¹¦" aria-label="Permalink to &quot;3.2 ä¸Šä¼  SSL è¯ä¹¦&quot;">â€‹</a></h4><p>å°†ä¸‹è½½çš„è¯ä¹¦æ–‡ä»¶ä¸Šä¼ åˆ° <code>ssl</code> ç›®å½•ï¼š</p><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ä¸Šä¼ è¯ä¹¦æ–‡ä»¶åˆ°æœåŠ¡å™¨</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com.pem</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@your-server-ip:~/nginx-docker/ssl/</span></span>
<span class="line"><span style="color:#FFCB6B;">scp</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com.key</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root@your-server-ip:~/nginx-docker/ssl/</span></span></code></pre></div><h4 id="_3-3-åˆ›å»º-nginx-é…ç½®æ–‡ä»¶" tabindex="-1">3.3 åˆ›å»º Nginx é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_3-3-åˆ›å»º-nginx-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;3.3 åˆ›å»º Nginx é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p><strong>nginx.confï¼ˆä¸»é…ç½®æ–‡ä»¶ï¼‰ï¼š</strong></p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">user </span><span style="color:#A6ACCD;"> nginx</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">worker_processes </span><span style="color:#A6ACCD;"> auto</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">error_log </span><span style="color:#A6ACCD;"> /var/log/nginx/error.log</span><span style="color:#89DDFF;"> notice;</span></span>
<span class="line"><span style="color:#89DDFF;">pid </span><span style="color:#A6ACCD;">       /var/run/nginx.pid</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">events</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> worker_connections </span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1024</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">http</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">      /etc/nginx/mime.types</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> default_type </span><span style="color:#A6ACCD;"> application/octet-stream</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> log_format  main</span><span style="color:#A6ACCD;">  </span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#C3E88D;"> - </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_user</span><span style="color:#C3E88D;"> [</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">time_local</span><span style="color:#C3E88D;">] &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request</span><span style="color:#C3E88D;">&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">status</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">body_bytes_sent</span><span style="color:#C3E88D;"> &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_referer</span><span style="color:#C3E88D;">&quot; &#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">                      </span><span style="color:#C3E88D;">&#39;&quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_user_agent</span><span style="color:#C3E88D;">&quot; &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_x_forwarded_for</span><span style="color:#C3E88D;">&quot;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;"> /var/log/nginx/access.log </span><span style="color:#89DDFF;"> main;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> sendfile </span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> keepalive_timeout </span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">65</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># å¯ç”¨ gzip å‹ç¼©</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> gzip  on;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> gzip_types </span><span style="color:#A6ACCD;">text/plain text/css application/json application/javascript text/xml application/xml</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">/etc/nginx/conf.d/*.conf</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><p><strong>conf.d/default.confï¼ˆç«™ç‚¹é…ç½®ï¼‰ï¼š</strong></p><div class="language-nginx"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># HTTP é‡å®šå‘åˆ° HTTPS</span></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">yourdomain.com www.yourdomain.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># å¼ºåˆ¶è·³è½¬åˆ° HTTPS</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;"> https://</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request_uri;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># HTTPS é…ç½®</span></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">443 ssl http2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">yourdomain.com www.yourdomain.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># SSL è¯ä¹¦é…ç½®ï¼ˆå®¹å™¨å†…è·¯å¾„ï¼‰</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_certificate </span><span style="color:#A6ACCD;">/etc/nginx/ssl/yourdomain.com.pem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_certificate_key </span><span style="color:#A6ACCD;">/etc/nginx/ssl/yourdomain.com.key</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># SSL å®‰å…¨é…ç½®</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_protocols </span><span style="color:#A6ACCD;">TLSv1.2 TLSv1.3</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_ciphers </span><span style="color:#A6ACCD;">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_prefer_server_ciphers </span><span style="color:#A6ACCD;">on</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_session_cache </span><span style="color:#A6ACCD;">shared:SSL:10m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> ssl_session_timeout </span><span style="color:#A6ACCD;">10m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># ç½‘ç«™æ ¹ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/usr/share/nginx/html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">index.html index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># è®¿é—®æ—¥å¿—</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> access_log </span><span style="color:#A6ACCD;">/var/log/nginx/yourdomain.access.log</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> error_log </span><span style="color:#A6ACCD;">/var/log/nginx/yourdomain.error.log</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> try_files $</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ </span><span style="color:#F78C6C;">=404</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span></code></pre></div><h4 id="_3-4-åˆ›å»º-docker-compose-yml" tabindex="-1">3.4 åˆ›å»º docker-compose.yml <a class="header-anchor" href="#_3-4-åˆ›å»º-docker-compose-yml" aria-label="Permalink to &quot;3.4 åˆ›å»º docker-compose.yml&quot;">â€‹</a></h4><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">version</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">3.8</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">services</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#F07178;">nginx</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">image</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx:latest</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">container_name</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">restart</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">always</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">ports</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">80:80</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">443:443</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">volumes</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># Nginx ä¸»é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./nginx.conf:/etc/nginx/nginx.conf:ro</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># ç«™ç‚¹é…ç½®ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./conf.d:/etc/nginx/conf.d:ro</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># SSL è¯ä¹¦ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./ssl:/etc/nginx/ssl:ro</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># ç½‘ç«™æ–‡ä»¶ç›®å½•</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./html:/usr/share/nginx/html:ro</span></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># æ—¥å¿—ç›®å½•ï¼ˆå¯é€‰ï¼‰</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">./logs:/var/log/nginx</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#F07178;">environment</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TZ=Asia/Shanghai</span></span></code></pre></div><h4 id="_3-5-åˆ›å»ºæµ‹è¯•é¡µé¢" tabindex="-1">3.5 åˆ›å»ºæµ‹è¯•é¡µé¢ <a class="header-anchor" href="#_3-5-åˆ›å»ºæµ‹è¯•é¡µé¢" aria-label="Permalink to &quot;3.5 åˆ›å»ºæµ‹è¯•é¡µé¢&quot;">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åˆ›å»ºæµ‹è¯• HTML æ–‡ä»¶</span></span>
<span class="line"><span style="color:#FFCB6B;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">html/index.html</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;&lt;</span><span style="color:#A6ACCD;"> &#39;</span><span style="color:#89DDFF;">EOF</span><span style="color:#A6ACCD;">&#39;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;html lang=&quot;zh-CN&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;head&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;title&gt;HTTPS é…ç½®æˆåŠŸ&lt;/title&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;style&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">        body {</span></span>
<span class="line"><span style="color:#C3E88D;">            font-family: -apple-system, BlinkMacSystemFont, &#39;Segoe UI&#39;, Roboto, sans-serif;</span></span>
<span class="line"><span style="color:#C3E88D;">            display: flex;</span></span>
<span class="line"><span style="color:#C3E88D;">            justify-content: center;</span></span>
<span class="line"><span style="color:#C3E88D;">            align-items: center;</span></span>
<span class="line"><span style="color:#C3E88D;">            min-height: 100vh;</span></span>
<span class="line"><span style="color:#C3E88D;">            margin: 0;</span></span>
<span class="line"><span style="color:#C3E88D;">            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);</span></span>
<span class="line"><span style="color:#C3E88D;">            color: white;</span></span>
<span class="line"><span style="color:#C3E88D;">        }</span></span>
<span class="line"><span style="color:#C3E88D;">        .container {</span></span>
<span class="line"><span style="color:#C3E88D;">            text-align: center;</span></span>
<span class="line"><span style="color:#C3E88D;">            padding: 2rem;</span></span>
<span class="line"><span style="color:#C3E88D;">        }</span></span>
<span class="line"><span style="color:#C3E88D;">        h1 { font-size: 3rem; margin-bottom: 1rem; }</span></span>
<span class="line"><span style="color:#C3E88D;">        p { font-size: 1.2rem; opacity: 0.9; }</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;/style&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;/head&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;body&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;div class=&quot;container&quot;&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">        &lt;h1&gt;ğŸ‰ HTTPS é…ç½®æˆåŠŸï¼&lt;/h1&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">        &lt;p&gt;æ‚¨çš„ç½‘ç«™å·²é€šè¿‡ SSL è¯ä¹¦åŠ å¯†ä¿æŠ¤&lt;/p&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">    &lt;/div&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;/body&gt;</span></span>
<span class="line"><span style="color:#C3E88D;">&lt;/html&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">EOF</span></span></code></pre></div><h4 id="_3-6-å¯åŠ¨-docker-å®¹å™¨" tabindex="-1">3.6 å¯åŠ¨ Docker å®¹å™¨ <a class="header-anchor" href="#_3-6-å¯åŠ¨-docker-å®¹å™¨" aria-label="Permalink to &quot;3.6 å¯åŠ¨ Docker å®¹å™¨&quot;">â€‹</a></h4><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># è¿›å…¥é¡¹ç›®ç›®å½•</span></span>
<span class="line"><span style="color:#82AAFF;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/nginx-docker</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å¯åŠ¨å®¹å™¨ï¼ˆåå°è¿è¡Œï¼‰</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-d</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨çŠ¶æ€</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span></code></pre></div><h3 id="_4-éªŒè¯-https" tabindex="-1">4. éªŒè¯ HTTPS <a class="header-anchor" href="#_4-éªŒè¯-https" aria-label="Permalink to &quot;4. éªŒè¯ HTTPS&quot;">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ curl æµ‹è¯• HTTPS</span></span>
<span class="line"><span style="color:#FFCB6B;">curl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-I</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://yourdomain.com</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># ä½¿ç”¨ openssl æŸ¥çœ‹è¯ä¹¦ä¿¡æ¯</span></span>
<span class="line"><span style="color:#FFCB6B;">openssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">s_client</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-connect</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com:443</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-servername</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">yourdomain.com</span></span></code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨åœ¨çº¿å·¥å…·æ£€æµ‹ SSL é…ç½®ï¼š</p><ul><li><a href="https://www.ssllabs.com/ssltest/" target="_blank" rel="noreferrer">SSL Labs</a></li><li><a href="https://www.sslshopper.com/ssl-checker.html" target="_blank" rel="noreferrer">SSL Checker</a></li></ul><h3 id="_5-å¸¸ç”¨-docker-å‘½ä»¤" tabindex="-1">5. å¸¸ç”¨ Docker å‘½ä»¤ <a class="header-anchor" href="#_5-å¸¸ç”¨-docker-å‘½ä»¤" aria-label="Permalink to &quot;5. å¸¸ç”¨ Docker å‘½ä»¤&quot;">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># åœæ­¢å®¹å™¨</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">down</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># é‡å¯å®¹å™¨ï¼ˆä¿®æ”¹é…ç½®åï¼‰</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># é‡æ–°åŠ è½½ Nginx é…ç½®ï¼ˆä¸é‡å¯å®¹å™¨ï¼‰</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æ£€æŸ¥ Nginx é…ç½®è¯­æ³•</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># è¿›å…¥å®¹å™¨å†…éƒ¨</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-it</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/bin/bash</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®æ—¶æ—¥å¿—</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span></span></code></pre></div><hr><h2 id="å¸¸è§é—®é¢˜" tabindex="-1">å¸¸è§é—®é¢˜ <a class="header-anchor" href="#å¸¸è§é—®é¢˜" aria-label="Permalink to &quot;å¸¸è§é—®é¢˜&quot;">â€‹</a></h2><h3 id="q1-åŸŸåè§£æä¸ç”Ÿæ•ˆ" tabindex="-1">Q1ï¼šåŸŸåè§£æä¸ç”Ÿæ•ˆï¼Ÿ <a class="header-anchor" href="#q1-åŸŸåè§£æä¸ç”Ÿæ•ˆ" aria-label="Permalink to &quot;Q1ï¼šåŸŸåè§£æä¸ç”Ÿæ•ˆï¼Ÿ&quot;">â€‹</a></h3><ul><li>æ£€æŸ¥è§£æè®°å½•æ˜¯å¦æ­£ç¡®é…ç½®</li><li>ç­‰å¾… DNS ç¼“å­˜åˆ·æ–°ï¼ˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿåˆ° 48 å°æ—¶ï¼‰</li><li>ä½¿ç”¨ <code>nslookup</code> æˆ– <code>dig</code> å‘½ä»¤æ’æŸ¥</li></ul><h3 id="q2-https-æ— æ³•è®¿é—®" tabindex="-1">Q2ï¼šHTTPS æ— æ³•è®¿é—®ï¼Ÿ <a class="header-anchor" href="#q2-https-æ— æ³•è®¿é—®" aria-label="Permalink to &quot;Q2ï¼šHTTPS æ— æ³•è®¿é—®ï¼Ÿ&quot;">â€‹</a></h3><ul><li>ç¡®è®¤æœåŠ¡å™¨é˜²ç«å¢™å·²å¼€æ”¾ 80 å’Œ 443 ç«¯å£</li><li>æ£€æŸ¥ Docker å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ</li><li>æ£€æŸ¥è¯ä¹¦æ–‡ä»¶è·¯å¾„å’Œæƒé™</li></ul><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--list-ports</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å¼€æ”¾ 80 å’Œ 443 ç«¯å£</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=80/tcp</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--permanent</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--add-port=443/tcp</span></span>
<span class="line"><span style="color:#FFCB6B;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">firewall-cmd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--reload</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æ£€æŸ¥å®¹å™¨çŠ¶æ€</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># æ£€æŸ¥ Nginx é…ç½®</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-t</span></span></code></pre></div><h3 id="q3-docker-å®¹å™¨æ— æ³•å¯åŠ¨" tabindex="-1">Q3ï¼šDocker å®¹å™¨æ— æ³•å¯åŠ¨ï¼Ÿ <a class="header-anchor" href="#q3-docker-å®¹å™¨æ— æ³•å¯åŠ¨" aria-label="Permalink to &quot;Q3ï¼šDocker å®¹å™¨æ— æ³•å¯åŠ¨ï¼Ÿ&quot;">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># æŸ¥çœ‹å®¹å™¨æ—¥å¿—æ’æŸ¥é—®é¢˜</span></span>
<span class="line"><span style="color:#FFCB6B;">docker-compose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">logs</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># å¸¸è§åŸå› ï¼š</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 1. ç«¯å£è¢«å ç”¨ï¼šæ£€æŸ¥ 80/443 ç«¯å£æ˜¯å¦è¢«å…¶ä»–æœåŠ¡å ç”¨</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. é…ç½®æ–‡ä»¶é”™è¯¯ï¼šæ£€æŸ¥ nginx.conf è¯­æ³•</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3. è¯ä¹¦æ–‡ä»¶ä¸å­˜åœ¨ï¼šç¡®è®¤ ssl ç›®å½•ä¸‹æœ‰è¯ä¹¦æ–‡ä»¶</span></span></code></pre></div><h3 id="q4-è¯ä¹¦è¿‡æœŸå¦‚ä½•æ›´æ–°" tabindex="-1">Q4ï¼šè¯ä¹¦è¿‡æœŸå¦‚ä½•æ›´æ–°ï¼Ÿ <a class="header-anchor" href="#q4-è¯ä¹¦è¿‡æœŸå¦‚ä½•æ›´æ–°" aria-label="Permalink to &quot;Q4ï¼šè¯ä¹¦è¿‡æœŸå¦‚ä½•æ›´æ–°ï¼Ÿ&quot;">â€‹</a></h3><div class="language-bash"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 1. ä¸‹è½½æ–°è¯ä¹¦</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 2. æ›¿æ¢ ssl ç›®å½•ä¸‹çš„è¯ä¹¦æ–‡ä»¶</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 3. é‡æ–°åŠ è½½ Nginx é…ç½®</span></span>
<span class="line"><span style="color:#FFCB6B;">docker</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exec</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx-ssl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">nginx</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">reload</span></span></code></pre></div><hr><h2 id="æ€»ç»“" tabindex="-1">æ€»ç»“ <a class="header-anchor" href="#æ€»ç»“" aria-label="Permalink to &quot;æ€»ç»“&quot;">â€‹</a></h2><table><thead><tr><th>æ­¥éª¤</th><th>æ“ä½œ</th><th>å·¥å…·/å¹³å°</th></tr></thead><tbody><tr><td>1</td><td>è´­ä¹°åŸŸå</td><td>é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ç­‰</td></tr><tr><td>2</td><td>DNS è§£æ</td><td>åŸŸåæœåŠ¡å•†æ§åˆ¶å°</td></tr><tr><td>3</td><td>åŸŸåå¤‡æ¡ˆ</td><td>ICP å¤‡æ¡ˆç³»ç»Ÿ</td></tr><tr><td>4</td><td>ç”³è¯· SSL è¯ä¹¦</td><td>é˜¿é‡Œäº‘ã€Let&#39;s Encrypt</td></tr><tr><td>5</td><td>åˆ›å»º Docker é…ç½®</td><td>docker-compose.yml</td></tr><tr><td>6</td><td>é…ç½® Nginx</td><td>nginx.conf</td></tr><tr><td>7</td><td>å¯åŠ¨å®¹å™¨</td><td>docker-compose up -d</td></tr></tbody></table><p>å®Œæˆä»¥ä¸Šæ­¥éª¤åï¼Œä½ çš„ç½‘ç«™å°±å¯ä»¥é€šè¿‡ HTTPS å®‰å…¨è®¿é—®äº†ï¼</p>`,81),e=[p];function t(c,r,i,y,C,D){return n(),a("div",null,e)}const F=s(o,[["render",t]]);export{d as __pageData,F as default};
